pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
--main

function _init()
	t = 0
end

function _update60()
 t = (t+2)%360
end

function _draw()
	cls(2)
	spr_r(1,64,65,t)
	spr_r(1,64,64,t)
	spr_r(2,64,63,t)
	spr_r(3,64,62,t)
	spr_r(4,64,61,t)
end
-->8
--rotate sprite
_sprx = 127
_spry = 63

function rspr(s, x, y, a)
	mset(_sprx,_spry,s)
	for i = 0,7 do
		x1 = x + (-4)*cos(a) - (i-4)*sin(a)
		y1 = y + (-4)*sin(a) + (i-4)*cos(a)
		x2 = x + (4)*cos(a) - (i-4)*sin(a)
		y2 = y + (4)*sin(a) + (i-4)*cos(a)
	
		tline(x1,y1,x2,y2,
		_sprx,_spry+i/8,1/8,0)
	end
end

function spr_r(s,x,y,a,w,h)
 sw=(w or 1)*8
 sh=(h or 1)*8
 sx=(s%8)*8
 sy=flr(s/8)*8
 x0=flr(0.5*sw)
 y0=flr(0.5*sh)
 a=a/360
 sa=sin(a)
 ca=cos(a)
 for ix=0,sw-1 do
  for iy=0,sh-1 do
   dx=ix-x0
   dy=iy-y0
   xx=flr(dx*ca-dy*sa+x0)
   yy=flr(dx*sa+dy*ca+y0)
   if (xx>=0 and xx<sw and yy>=0 and yy<=sh) then
    pset(x+ix,y+iy,sget(sx+xx,sy+yy))
   end
  end
 end
end
__gfx__
00000000000000000099990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000055005500599995000cccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700055005500599995000cccc0000cccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000099990000999900009999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000099990000999900009999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700055005500599995000999900000990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000055005500599995000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000099990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
