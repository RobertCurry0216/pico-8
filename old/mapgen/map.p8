pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
function _init()
 mapgen = {}
	for i=1,128 do
		local row = {}
		for j=1,128 do
			add(row, rnd(2)<0.6 and 0 or 1)
		end
		add(mapgen,row)
	end
end

function _update()
	if btnp(❎) then 
		mapgen = updatemap(mapgen)
	end
end

function _draw()
	cls()
	for y=1,128 do
		for x=1,128 do
			local c = mapgen[y][x] * 7
			pset(x-1,y-1,c)
		end
	end
end
-->8
--mapgen function

function updatemap(m)
	local c, row, new
	new = {}
	for y=1,128 do
		row = {}
		for x=1,128 do
			c=0
			for dy=-1,1 do
				for dx=-1,1 do
					if 
					y+dy < 1 or
					y+dy > 128 or
					x+dx < 1 or
					x+dx > 128 or
					m[y+dy][x+dx] == 0 then
						c+=1
					end
				end
			end
			if m[y][x] == 0 then
				c-=1
			end
			add(row, c<4 and 1 or 0)
		end
		add(new,row)
	end
	return new
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
